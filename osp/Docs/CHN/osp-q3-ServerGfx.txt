OSP - Server-enabled Graphics
=============================
14 Dec 01
rhea@OrangeSmoothie.org
http://www.OrangeSmoothie.org

OSP最新的相关中文文本信息你可以在http://www.q3acn.com获得，
如果有问题请与cat@q3acn.com联系。

OSP Tourney DM/CA/CTF允许服务器管理者将自定义的图形在连入服务器
的客户端上显示。这是为了战队、团体或比赛组织在比赛的录象/截图中
加入额外的图形来达到宣传等目的。

这些额外附加的图形决不会影响到正常的比赛，它们只能显示在下面两
个地方

     - 当连入服务器，调入地图时的截图画面中
     - 在每局结束，还未调入下个地图或地图还没重新开始时的记分板中

图形格式的制作定义相当直接明了。为了防止万一运行起来有麻烦，我在OSP中
加入了一个例子以做参考：


1. 搜集你希望显示的图形。这些图形要为type 6(?)或type 10(?)的tga
   格式才能获得最大的兼容性（也就是透明层显示）。JPEG(.jpg)格式
   可能可以使用，但目前OSP还不支持。

2. 建立一个新的.pk3文件，将搜集的图形放到这个目录：

        gfx\2d\

3. 图形命名遵循以下格式：

        customXX.tga  (XX为1 到 16)

   命名必须是从开始依次递增的，开始为"1"。也就是说，第一个图形为
   "custom1.tga"，下一个为"custom2.tga"，可以递增到16。OSP只支持
   16个自定义的图形。

4. 完成后，将.pk3文件放到服务器的osp/目录下。你可以自己定义.pk3文件
   名称，以"z-"为前缀，以确保sv_pure 1正确支持。

5. 将服务器设置为sv_pure 1和sv_allowDownload 1，以确保客户端能够下载
   这个图形的.pk3文件。

6. 建立一个定义在客户端显示图形位置、大小的gfx说明文件。格式如下：

      x y w h:x y w h

      - x = the X (horizontal) coordinate (from the left)
      - y = the Y (vertical) coordinate (from the top)
      - w = width of graphic
      - h = height of graphic

      - x = X（水平）坐标（左边为原点）
      - y = Y（垂直）坐标（顶端为原点）
      - w = 图形宽度
      - h = 图形高度

        ----> 注意：X坐标为0到640，Y坐标为0到480。你不必担心客户端
              分辨率设置是否会大于或小于这个模式，OSP会根据客户端
              分辨率适当的调整图形的。

      你已经注意到了，这里每行有两个以":"分割的设置。每行的设置
      对应一个图形，第一部分是定义客户端连入服务器，调入地图时，
      图形位置/尺寸的，第二部分是定义每局结束时，记分板中图形位
      置/尺寸的。

      图形定义文件中，每行定义文件分别对应着相应的图形。也就是说
      第一行定义对应着"custom1.tga"，第二行定义对应着"custom2.tga"
      等等。

      如果要禁止图形的显示（比如说只在连入时显示，不在每局结束时
      显示），则只需要将对应的"x y w h"都设置为"-1"。

      定义文件中的行次等同于你自定义图形.pk3文件中的
      "customXX.tga"图形文件的数字。

7. 在服务器主要的.cfg中，带图形定义文件的路径/名字来
   定义"server_gfxspecfile"

8. 重新启动服务器。

9. 如果你仍有问题可以参看cfg-gfxexample中的例子。只要将这两个
   文件拷贝到osp/目录下，同时在你服务器的设置中加入：

        set server_gfxspecfile "gfxdef.cfg"

   当客户端连入时，可以在屏幕角落看到3个不同大小的额外的OSP标志。